<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
    <actionGroup name="AdminCreateCompanyActionGroup">
      <arguments>
          <argument name="company"/>
          <argument name="customer" defaultValue="CustomerEntityOne"/>
      </arguments>
      <click selector="{{AdminMenuSection.customers}}" stepKey="clickCustomers"/>
      <waitForLoadingMaskToDisappear stepKey="waitForLoadCompanies"/>
      <click selector="{{AdminMenuSection.companies}}" stepKey="clickCompanies"/>
      <waitForPageLoad stepKey="waitForCompaniesPageLoad"/>
      <click selector="{{AdminGridMainControls.add}}" stepKey="clickAddNewCompany"/>
      <fillField selector="{{AdminNewCompanySection.companyName}}" userInput="{{company.company_name}}" stepKey="fillName"/>
      <fillField selector="{{AdminNewCompanySection.companyEmail}}" userInput="{{customer.email}}" stepKey="fillEmail"/>
      <click selector="{{AdminNewCompanySection.companyLegalAddress}}" stepKey="clickLegalAddress"/>
      <fillField selector="{{AdminNewCompanySection.companyStreet}}" userInput="{{company.street[0]}}" stepKey="fillStreet"/>
      <fillField selector="{{AdminNewCompanySection.companyCity}}" userInput="{{company.city}}" stepKey="fillCity"/>
      <selectOption selector="{{AdminNewCompanySection.companyCountry}}" userInput="{{company.country_id}}" stepKey="setCountry"/>
      <selectOption selector="{{AdminNewCompanySection.companyState}}" userInput="{{company.region_id}}" stepKey="setState"/>
      <fillField selector="{{AdminNewCompanySection.companyPostcode}}" userInput="{{company.postcode}}" stepKey="fillPostcode"/>
      <fillField selector="{{AdminNewCompanySection.companyTelephone}}" userInput="{{company.telephone}}" stepKey="fillTelephone"/>
      <click selector="{{AdminNewCompanySection.companyAdmin}}" stepKey="clickAdmin"/>
      <fillField selector="{{AdminNewCompanySection.companyAdminEmail}}" userInput="{{customer.email}}" stepKey="fillAdminEmail"/>
      <fillField selector="{{AdminNewCompanySection.companyAdminFirstName}}" userInput="{{customer.firstname}}" stepKey="fillAdminFirstName"/>
      <fillField selector="{{AdminNewCompanySection.companyAdminLastName}}" userInput="{{customer.lastname}}" stepKey="fillAdminLastName"/>
      <click selector="{{AdminGridMainControls.save}}" stepKey="clickSave"/>
      <see selector="{{AdminMessagesSection.success}}" userInput="You have created company" stepKey="seeSuccess"/>
    </actionGroup>
    <actionGroup name="AdminDeleteCompanyActionGroup">
        <arguments>
            <argument name="companyName" type="string"/>
        </arguments>
        <amOnPage url="{{AdminCompaniesPage.url}}" stepKey="amOnAdmin"/>
        <waitForPageLoad stepKey="waitCompaniesPageLoad"/>
        <conditionalClick selector="{{AdminDataGridHeaderSection.clearFilters}}" dependentSelector="{{AdminDataGridHeaderSection.clearFilters}}" visible="true" stepKey="clickOnButtonToRemoveFiltersIfPresent"/>
        <conditionalClick selector="{{AdminDataGridFilterSection.filterExpand}}" dependentSelector="{{AdminDataGridFilterSection.filterForm}}" visible="false" stepKey="openFiltersFormIfNecessary"/>
        <waitForElementVisible selector="{{AdminDataGridFilterSection.inputFieldByNameAttr('company_name')}}" stepKey="waitForFormVisible"/>
        <fillField userInput="{{companyName}}" selector="{{AdminDataGridFilterSection.inputFieldByNameAttr('company_name')}}" stepKey="fillFilterNameField"/>
        <click selector="{{AdminDataGridFilterSection.apply}}" stepKey="applyFilters"/>
        <waitForPageLoad stepKey="waitFilterIsApplied"/>
        <click selector="{{AdminCompaniesSection.selectAll}}" stepKey="selectAll"/>
        <click selector="{{AdminGridSelectRows.bulkActionDropdown}}" stepKey="clickActions"/>
        <click selector="{{AdminCompaniesSection.delete}}" stepKey="clickDelete"/>
        <waitForElementVisible selector="{{AdminConfirmationModalSection.ok}}" stepKey="waitForLoadConfirmation"/>
        <click selector="{{AdminConfirmationModalSection.ok}}" stepKey="confirmDelete"/>
        <waitForElementVisible selector="{{AdminMessagesSection.successMessage}}" stepKey="waitForSuccessMessage"/>
        <see selector="{{AdminMessagesSection.success}}" userInput="A total of 1 record(s) were deleted" stepKey="seeSuccess"/>
        <conditionalClick selector="{{AdminDataGridHeaderSection.clearFilters}}" dependentSelector="{{AdminDataGridHeaderSection.clearFilters}}" visible="true" stepKey="clickOnButtonToRemoveFiltersIfPresent1"/>
    </actionGroup>
    <actionGroup name="AdminClearCompaniesFiltersActionGroup">
        <amOnPage url="{{AdminCompaniesPage.url}}" stepKey="amOnCompaniesPage"/>
        <waitForPageLoad stepKey="WaitForPageToLoad"/>
        <conditionalClick selector="{{AdminDataGridHeaderSection.clearFilters}}" dependentSelector="{{AdminDataGridHeaderSection.clearFilters}}" visible="true" stepKey="clickOnButtonToRemoveFiltersIfPresent"/>
    </actionGroup>

    <actionGroup name="AdminStartToCreateCompany">
        <annotations>
            <description>Navigate to the Admin Companies list page, press 'Add New Company' button, fill data on main tab</description>
        </annotations>
        <arguments>
            <argument name="companyName" type="string"/>
            <argument name="companyEmail" type="string"/>
        </arguments>

        <amOnPage url="{{AdminCompaniesPage.url}}" stepKey="openCompaniesListPage"/>
        <click selector="{{AdminMainActionsSection.add}}" stepKey="clickAddNewCompany"/>
        <waitForElementVisible selector="{{AdminNewCompanySection.companyName}}" stepKey="waitForFormVisible"/>
        <fillField selector="{{AdminNewCompanySection.companyName}}" userInput="{{companyName}}" stepKey="fillName"/>
        <fillField selector="{{AdminNewCompanySection.companyEmail}}" userInput="{{companyEmail}}" stepKey="fillEmail"/>
    </actionGroup>

    <actionGroup name="AdminFillCompanyLegalAddress">
        <annotations>
            <description>Fill company legal address</description>
        </annotations>
        <arguments>
            <argument name="company" defaultValue="Default_Company"/>
        </arguments>
        <conditionalClick selector="{{AdminNewCompanySection.companyLegalAddress}}" dependentSelector="{{AdminNewCompanySection.companyCountry}}" visible="false" stepKey="clickLegalAddress"/>
        <waitForElementVisible selector="{{AdminNewCompanySection.companyStreet}}" stepKey="waitForFormVisible"/>
        <fillField selector="{{AdminNewCompanySection.companyStreet}}" userInput="{{company.street[0]}}" stepKey="fillStreet"/>
        <fillField selector="{{AdminNewCompanySection.companyCity}}" userInput="{{company.city}}" stepKey="fillCity"/>
        <selectOption selector="{{AdminNewCompanySection.companyCountry}}" userInput="{{company.country_id}}" stepKey="setCountry"/>
        <selectOption selector="{{AdminNewCompanySection.companyState}}" userInput="{{company.region_id}}" stepKey="setState"/>
        <fillField selector="{{AdminNewCompanySection.companyPostcode}}" userInput="{{company.postcode}}" stepKey="fillPostcode"/>
        <fillField selector="{{AdminNewCompanySection.companyTelephone}}" userInput="{{company.telephone}}" stepKey="fillTelephone"/>
    </actionGroup>

    <actionGroup name="AdminFillCompanyAdmin">
        <annotations>
            <description>Fill company admin</description>
        </annotations>
        <arguments>
            <argument name="companyAdmin"/>
        </arguments>
        <conditionalClick selector="{{AdminNewCompanySection.companyAdmin}}" dependentSelector="{{AdminNewCompanySection.companyAdminEmail}}" visible="false" stepKey="clickAdmin"/>
        <waitForElementVisible selector="{{AdminNewCompanySection.companyAdmin}}" stepKey="waitForFormVisible"/>
        <fillField selector="{{AdminNewCompanySection.companyAdminFirstName}}" userInput="{{companyAdmin.firstname}}" stepKey="fillAdminFirstName"/>
        <fillField selector="{{AdminNewCompanySection.companyAdminLastName}}" userInput="{{companyAdmin.lastname}}" stepKey="fillAdminLastName"/>
        <fillField selector="{{AdminNewCompanySection.companyAdminEmail}}" userInput="{{companyAdmin.email}}" stepKey="fillAdminEmail"/>
    </actionGroup>

    <actionGroup name="AdminCheckCompanyAdminFormData">
        <annotations>
            <description>Check company admin data is correct</description>
        </annotations>
        <arguments>
            <argument name="companyAdmin"/>
        </arguments>
        <conditionalClick selector="{{AdminNewCompanySection.companyAdmin}}" dependentSelector="{{AdminNewCompanySection.companyAdminEmail}}" visible="false" stepKey="clickAdmin"/>
        <waitForElementVisible selector="{{AdminNewCompanySection.companyAdminFirstName}}" stepKey="waitForFormVisible"/>
        <seeInField selector="{{AdminNewCompanySection.companyAdminFirstName}}" userInput="{{companyAdmin.firstname}}" stepKey="checkAdminFirstName"/>
        <seeInField selector="{{AdminNewCompanySection.companyAdminLastName}}" userInput="{{companyAdmin.lastname}}" stepKey="checkAdminLastName"/>
        <seeInField selector="{{AdminNewCompanySection.companyAdminEmail}}" userInput="{{companyAdmin.email}}" stepKey="checkAdminEmail"/>
    </actionGroup>
</actionGroups>
